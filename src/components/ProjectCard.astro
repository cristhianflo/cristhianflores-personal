---
import { ExternalLink } from "@lucide/astro";
import { Image } from "astro:assets";
import SimpleIcon from "./SimpleIcon.astro";
import { siGit } from "simple-icons";

interface Props {
  title: string;
  description: string;
  thumbnail?: {
    src: string;
    alt: string;
  };
  technologies?: string[];
  url?: string;
  repositoryUrl?: string;
}

const { title, description, thumbnail, technologies, url, repositoryUrl } =
  Astro.props;
---

<div
  class="group/project relative flex items-center justify-between p-4 transition-all group-hover/project-list:opacity-50 hover:!opacity-100"
>
  <!-- Main content -->
  <div class="flex flex-col gap-2">
    <!-- Title -->
    <div
      class="inline-flex items-center gap-1 text-zinc-100 transition-colors group-hover/project:text-amber-400"
    >
      <h2 class="mr-1.5 font-semibold">
        {title}
      </h2>
      {url && <ExternalLink size={16} />}
    </div>

    <!-- Description -->
    <p class="text-sm text-balance">
      {description}
    </p>

    {
      repositoryUrl && (
        <a
          href={repositoryUrl}
          rel="noreferrer noopener"
          target="_blank"
          class="relative z-10 inline-flex w-max items-center gap-1.5 text-sm text-zinc-100 transition-colors hover:text-amber-400"
          aria-label={`${title} (opens in a new tab)`}
        >
<SimpleIcon icon={siGit} size="16" />
          <span class="pr-2">Go to repository</span>
        </a>
      )
    }
    <!-- Technologies -->
    {
      technologies && (
        <div class="flex flex-wrap gap-2">
          {technologies.map((tech) => (
            <span class="mt-2 rounded-full border border-amber-300 bg-amber-400/10 px-2 py-1 text-xs text-amber-300">
              {tech}
            </span>
          ))}
        </div>
      )
    }
  </div>

  <!-- Thumbnail -->
  {
    thumbnail && (
      <Image
        alt={thumbnail.alt}
        loading="lazy"
        class="aspect-video border border-amber-400 object-cover"
        src={thumbnail.src}
        width="163"
        height="92"
      />
    )
  }

  <div
    class="absolute inset-0 -z-10 hidden transition-all lg:block lg:group-hover/project:bg-zinc-800/50"
  >
  </div>
  <!-- Optional link to project -->
  {
    url && (
      <a
        href={url}
        target="_blank"
        rel="noreferrer noopener"
        class="absolute inset-0 h-full w-full"
        aria-label={`${title} (opens in a new tab)`}
      />
    )
  }
</div>
